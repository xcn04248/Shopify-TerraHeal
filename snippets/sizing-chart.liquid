<modal-opener
  class="product-popup-modal__opener sizing-chart no-js-hidden quick-add-hidden flex-justify-{{ block.settings.button_alignment }}"
  data-modal="#PopupModal-{{ block.id }}"
  data-section="{{ section.id }}"
  data-append="{{ block.settings.append }}"
  style="
    margin-top: {{ block.settings.margin_top | divided_by: 10.0 }}rem;
    margin-bottom: {{ block.settings.margin_bottom | divided_by: 10.0 }}rem;
  "
>
  <button
    id="ProductPopup-{{ block.id }}"
    class="product-popup-modal__button sizing-chart__button{% if block.settings.button_underline %} sizing-chart__button--underline{% endif %} flex-center" 
    style='--font-size:{{ block.settings.text_size | divided_by: 10.0 }}rem;'
    type="button"
    aria-haspopup="dialog"
  >
    {% if block.settings.button_custom_icon != blank %}
      <img
        src="{{ block.settings.button_custom_icon | image_url: width: 150 }}"
        alt=""
        height="auto"
        width="auto"
        loading="lazy"
      >
    {% elsif block.settings.button_icon != blank %}
      {% render 'material-icon', icon: block.settings.button_icon, filled: block.settings.button_filled_icon %}
    {% endif %}
    <span class="sizing-chart__button__text">{{ block.settings.button_label }}</span>
  </button>
</modal-opener>
<a href="{{ block.settings.page.url }}" class="product-popup-modal__button link no-js">
  {{- block.settings.text -}}
</a>

{% comment %} content {% endcomment %}
<modal-dialog
  id="PopupModal-{{ block.id }}"
  class="product-popup-modal"
  {{ block.shopify_attributes -}}
  {% if block.settings.test_mode %}
    open
  {% endif %}
>
  <div
    role="dialog"
    aria-label="{{ block.settings.text }}"
    aria-modal="true"
    class="product-popup-modal__content product-popup-modal__content--centered sizing-chart__modal-container"
    tabindex="-1"
  >
    <button
      id="ModalClose-{{ block.id }}"
      type="button"
      class="product-popup-modal__toggle product-popup-modal__toggle--{{ block.settings.close_button_style }}"
      aria-label="{{ 'accessibility.close' | t }}"
    >
      {% render 'icon-close' %}
    </button>
    <div class="product-popup-modal__content-info sizing-chart__modal content-rte color-{{ block.settings.color_scheme }}">
      {% if block.settings.headline != blank %}
        <h3 class="sizing-chart__title center {{ block.settings.heading_size }}">
          {{ block.settings.headline }}
        </h3>
      {% endif %}
      {% if block.settings.top_image != blank %}
        <div class="sizing-chart__top-image">
          {%- capture sizes -%}
            (min-width: 750px) 800px / 2), calc((100vw - 50px))
          {%- endcapture -%}
          {{
            block.settings.top_image
            | image_url: width: 1500
            | image_tag: loading: 'lazy', sizes: sizes, widths: '165, 360, 535, 750, 1070, 1250, 1500'
          }}
        </div>
      {% endif %}
      {% if block.settings.table_content != blank %}
        <table class="sizing-chart-table">
          {% if block.settings.table_header_content != blank %}
            {% assign columns = block.settings.table_header_content | split: ',' %}
            <thead>
              <tr>
                {% for column in columns %}
                  <th
                    class="sizing-chart-table__th color-{{ block.settings.table_header_color_scheme }}"
                    align="center"
                  >
                    {{ column | strip }}
                  </th>
                {% endfor %}
              </tr>
            </thead>
          {% endif %}
          <tbody>
            {% assign rows = block.settings.table_content | split: '</p><p>' %}
            {% for row in rows %}
              <tr>
                {% assign columns = row | remove: '<p>' | remove: '</p>' | split: ',' %}
                {% for column in columns %}
                  <td class="sizing-chart-table__td" align="center">
                    {{ column | strip }}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
      {% if block.settings.caption_text != blank %}
        <div
          class="sizing-chart__caption {{ block.settings.caption_alignment }} rte"
          style="--text-size:{{ block.settings.caption_size }};--text-color:{{ block.settings.caption_color }};"
        >
          {{ block.settings.caption_text }}
        </div>
      {% endif %}
      {% if block.settings.bottom_image != blank %}
        <div class="sizing-chart__top-image">
          {%- capture sizes -%}
            (min-width: 750px) 800px / 2), calc((100vw - 50px))
          {%- endcapture -%}
          {{
            block.settings.bottom_image
            | image_url: width: 1500
            | image_tag: loading: 'lazy', sizes: sizes, widths: '165, 360, 535, 750, 1070, 1250, 1500'
          }}
        </div>
      {% endif %}
    </div>
  </div>
</modal-dialog>