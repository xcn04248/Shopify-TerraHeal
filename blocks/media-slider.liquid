<splide-component
  data-type="{{ block.settings.type }}"
  data-autoplay="{{ block.settings.autoplay }}"
  data-autoplay-speed="{{ block.settings.autoplay_speed }}"
  data-arrows-color="{{ block.settings.arrows_color_scheme }}"
  data-dots-color="{{ block.settings.dots_color_scheme }}"
  data-slides-desktop="{{ block.settings.slides_desktop }}"
  data-per-move-desktop="{{ block.settings.per_move_desktop }}"
  data-gap-desktop="{{ block.settings.desktop_spacing }}"
  data-side-padding-desktop="{{ block.settings.desktop_side_padding }}"
  data-padding-calc-desktop="{{ block.settings.desktop_padding_calc }}"
  data-slides-mobile="{{ block.settings.slides_mobile }}"
  data-per-move-mobile="{{ block.settings.per_move_mobile }}"
  data-gap-mobile="{{ block.settings.mobile_spacing }}"
  data-side-padding-mobile="{{ block.settings.mobile_side_padding }}"
  data-padding-calc-mobile="{{ block.settings.mobile_padding_calc }}"
  {% if block.settings.desktop_adaptive_height and block.settings.slides_desktop == 1 %}
    data-desktop-adaptive-height="true"
  {% endif %}
  {% if block.settings.mobile_adaptive_height and block.settings.slides_mobile == 1 %}
    data-mobile-adaptive-height="true"
  {% endif %}
  data-image-slider="true"
  data-pause-videos="true"
  style="
    --columns-desktop:{{ block.settings.slides_desktop }};
    --columns-mobile:{{ block.settings.slides_mobile }};
    --gap-desktop:{{ block.settings.desktop_spacing }}px;
    --gap-mobile:{{ block.settings.mobile_spacing }}px;
    margin-top: {{ block.settings.margin_top | divided_by: 10.0 }}rem;
    margin-bottom: {{ block.settings.margin_bottom | divided_by: 10.0 }}rem;
  "
  class="{% if block.settings.mobile_full_page %}mobile-side-margins-negative {% endif %}{{ block.settings.visibility }}"
  {{- block.shopify_attributes -}}
>
  <div
    class="
      splide splide--precalc-width
      splide--desktop-dots-{{ block.settings.desktop_dots_position }}
      splide--mobile-dots-{{ block.settings.mobile_dots_position }}
      splide--desktop-arrows-{{ block.settings.desktop_arrows_position }}
      splide--mobile-arrows-{{ block.settings.mobile_arrows_position }}
      {% if block.settings.transparent_arrows %} splide--transparent-arrows{% endif %}
    "
  >
    <div class="splide__track">
      <ul class="splide__list">
        {% assign no_media = true %}
        {% for i in (1..10) %}
          {% liquid
            case i
              when 1
                assign image = block.settings.image_1
                assign image_desc = block.settings.image_desc_1
              when 2
                assign image = block.settings.image_2
                assign image_desc = block.settings.image_desc_2
              when 3
                assign image = block.settings.image_3
                assign image_desc = block.settings.image_desc_3
              when 4
                assign image = block.settings.image_4
                assign image_desc = block.settings.image_desc_4
              when 5
                assign image = block.settings.image_5
                assign image_desc = block.settings.image_desc_5
              when 6
                assign image = block.settings.image_6
                assign image_desc = block.settings.image_desc_6
              when 7
                assign image = block.settings.image_7
                assign image_desc = block.settings.image_desc_7
              when 8
                assign image = block.settings.image_8
                assign image_desc = block.settings.image_desc_8
              when 9
                assign image = block.settings.image_9
                assign image_desc = block.settings.image_desc_9
              when 10
                assign image = block.settings.image_10
                assign image_desc = block.settings.image_desc_10
            endcase
          %}

          {% if image != blank %}
            {% assign no_media = false %}
            <li class="splide__slide">
              <div class="splide__slide__container">
                <div class="image-slide">
                  <div
                    class="image-slide__image media media--transparent ratio"
                    style="--ratio-percent: {{ 1 | divided_by: image.aspect_ratio | times: 100 }}%;"
                  >
                    {{ image | image_url: width: 2000 | image_tag: loading: 'lazy' }}
                  </div>
                  {% if image_desc != blank %}
                    <div class="image-slide__desc {{ block.settings.desc_alignment }} color-{{ block.settings.desc_color_scheme }}">
                      {{ image_desc }}
                    </div>
                  {% endif %}
                </div>
              </div>
            </li>
          {% endif %}
        {% endfor %}

        {%- comment -%} Videos {%- endcomment -%}
        {% for i in (1..10) %}
          {% liquid
            case i
              when 1
                assign video = block.settings.video_1
                assign video_thumb = block.settings.video_thumb_1
                assign video_desc = block.settings.video_desc_1
              when 2
                assign video = block.settings.video_2
                assign video_thumb = block.settings.video_thumb_2
                assign video_desc = block.settings.video_desc_2
              when 3
                assign video = block.settings.video_3
                assign video_thumb = block.settings.video_thumb_3
                assign video_desc = block.settings.video_desc_3
              when 4
                assign video = block.settings.video_4
                assign video_thumb = block.settings.video_thumb_4
                assign video_desc = block.settings.video_desc_4
              when 5
                assign video = block.settings.video_5
                assign video_thumb = block.settings.video_thumb_5
                assign video_desc = block.settings.video_desc_5
              when 6
                assign video = block.settings.video_6
                assign video_thumb = block.settings.video_thumb_6
                assign video_desc = block.settings.video_desc_6
              when 7
                assign video = block.settings.video_7
                assign video_thumb = block.settings.video_thumb_7
                assign video_desc = block.settings.video_desc_7
              when 8
                assign video = block.settings.video_8
                assign video_thumb = block.settings.video_thumb_8
                assign video_desc = block.settings.video_desc_8
              when 9
                assign video = block.settings.video_9
                assign video_thumb = block.settings.video_thumb_9
                assign video_desc = block.settings.video_desc_9
              when 10
                assign video = block.settings.video_10
                assign video_thumb = block.settings.video_thumb_10
                assign video_desc = block.settings.video_desc_10
            endcase

            assign action_on_inactive = 'none'
            if block.settings.muted_autoplay == false
              assign action_on_inactive = 'pause'
            elsif block.settings.muted_autoplay and block.settings.display_sound_btn and block.settings.display_play_btn
              assign action_on_inactive = 'pause'
            elsif block.settings.muted_autoplay and block.settings.display_sound_btn and block.settings.display_play_btn == false
              assign action_on_inactive = 'mute'
            endif
          %}

          {% if video != blank %}
            {% assign no_media = false %}
            <li class="splide__slide">
              <div class="splide__slide__container">
                <div class="image-slide">
                  <div
                    class="image-slide__image media media--transparent ratio"
                    style="--ratio-percent: {{ 1 | divided_by: video.aspect_ratio | times: 100 }}%;"
                  >
                    {% render 'video-player',
                      block: block,
                      custom_video: video,
                      custom_thumbnail: video_thumb,
                      action_on_inactive: action_on_inactive
                    %}
                  </div>
                  {% if video_desc != blank %}
                    <div class="image-slide__desc {{ block.settings.desc_alignment }} color-{{ block.settings.desc_color_scheme }}">
                      {{ video_desc }}
                    </div>
                  {% endif %}
                </div>
              </div>
            </li>
          {% endif %}
        {% endfor %}

        {% if no_media %}
          {% for i in (1..5) %}
            <li class="splide__slide">
              <div class="splide__slide__container">
                <div class="image-slide">
                  <div class="image-slide__image">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
                  </div>
                </div>
              </div>
            </li>
          {% endfor %}
        {% endif %}
      </ul>
    </div>
    <div class="splide__dots-and-arrows">
      <ul class="splide__pagination"></ul>
      <div class="splide__arrows"></div>
    </div>
  </div>
</splide-component>

{% schema %}
{
  "name": "Image/Video slider",
  "tag": null,
  "settings": [
    {
      "type": "select",
      "id": "visibility",
      "options": [
        {
          "value": "desktop-hidden",
          "label": "Mobile only"
        },
        {
          "value": "mobile-hidden",
          "label": "Desktop only"
        },
        {
          "value": "always-display",
          "label": "All devices"
        }
      ],
      "label": "Display on",
      "default": "always-display"
    },
    {
      "type": "header",
      "content": "Slider"
    },
    {
      "type": "paragraph",
      "content": "ATTENTION: ONLY in the theme editor, pagination dots might duplicate after changing section settings. To overcome this, simply click Save. This has NO EFFECT on the published website."
    },
    {
      "type": "select",
      "id": "type",
      "label": "Type",
      "options": [
        { "value": "slide", "label": "Classic" },
        { "value": "loop", "label": "Infinite" },
        { "value": "fade", "label": "Fade" }
      ],
      "default": "slide"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "label": "Autoplay speed",
      "min": 1,
      "max": 15,
      "step": 0.5,
      "unit": "sec",
      "default": 5
    },
    {
      "type": "select",
      "id": "arrows_color_scheme",
      "label": "Arrows color scheme",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Inverse" }
      ],
      "default": "inverse"
    },
    {
      "type": "checkbox",
      "id": "transparent_arrows",
      "label": "Transparent arrows",
      "default": false
    },
    {
      "type": "select",
      "id": "dots_color_scheme",
      "label": "Dots color",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Text" }
      ],
      "default": "inverse"
    },
    {
      "type": "header",
      "content": "Desktop"
    },
    {
      "type": "range",
      "id": "desktop_border_radius",
      "label": "Slides corner radius",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "slides_desktop",
      "label": "Slides per page",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "per_move_desktop",
      "label": "Slides to scroll on one move",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "desktop_spacing",
      "label": "Spacing",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 28
    },
    {
      "type": "range",
      "id": "desktop_side_padding",
      "label": "Preview of prev & next slide",
      "min": 0,
      "max": 150,
      "step": 5,
      "unit": "px",
      "default": 0,
      "info": "Only recommended if Type is set to Infinite"
    },
    {
      "type": "checkbox",
      "id": "desktop_padding_calc",
      "label": "Disable empty preview on first & last slide",
      "default": true,
      "info": "Moves the first slide to the left edge and last one to the right if Preview value is enabled. Visible if type is set to Slider."
    },
    {
      "type": "checkbox",
      "id": "desktop_adaptive_height",
      "label": "Adaptive height",
      "default": false,
      "info": "Only available if Slides per page is set to 1."
    },
    {
      "type": "select",
      "id": "desktop_dots_position",
      "label": "Dots position",
      "options": [
        { "value": "hidden", "label": "Hidden" },
        { "value": "under", "label": "Under the slider" },
        { "value": "over", "label": "Over the slider" }
      ],
      "default": "under"
    },
    {
      "type": "select",
      "id": "desktop_arrows_position",
      "label": "Arrows position",
      "options": [
        { "value": "hidden", "label": "Hidden" },
        { "value": "under", "label": "Under the slider" },
        { "value": "sides", "label": "On sides of the slider" }
      ],
      "default": "sides"
    },

    {
      "type": "header",
      "content": "Mobile"
    },
    {
      "type": "checkbox",
      "id": "mobile_full_page",
      "label": "Full page width",
      "default": false
    },
    {
      "type": "range",
      "id": "mobile_border_radius",
      "label": "Slides corner radius",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "slides_mobile",
      "label": "Slides per page",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "per_move_mobile",
      "label": "Slides to scroll on one move",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "mobile_spacing",
      "label": "Spacing",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "mobile_side_padding",
      "label": "Preview of prev & next slide",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 0,
      "info": "Only recommended if Type is set to Infinite"
    },
    {
      "type": "checkbox",
      "id": "mobile_padding_calc",
      "label": "Disable empty preview on first & last slide",
      "default": true,
      "info": "Moves the first slide to the left edge adn last one to the right if Preview value is enabled. Visible if type is set to Slider."
    },
    {
      "type": "checkbox",
      "id": "mobile_adaptive_height",
      "label": "Adaptive height",
      "default": false,
      "info": "Only available if Slides per page is set to 1."
    },
    {
      "type": "select",
      "id": "mobile_dots_position",
      "label": "Dots position",
      "options": [
        { "value": "hidden", "label": "Hidden" },
        { "value": "under", "label": "Under the slider" },
        { "value": "over", "label": "Over the slider" }
      ],
      "default": "under"
    },
    {
      "type": "select",
      "id": "mobile_arrows_position",
      "label": "Arrows position",
      "options": [
        { "value": "hidden", "label": "Hidden" },
        { "value": "under", "label": "Under the slider" },
        { "value": "sides", "label": "On sides of the slider" }
      ],
      "default": "sides"
    },
    {
      "type": "header",
      "content": "Descriptions"
    },
    {
      "type": "select",
      "id": "desc_alignment",
      "label": "Description text alignment",
      "options": [
        { "value": "", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "desc_color_scheme",
      "label": "Description color scheme",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Inverse" }
      ],
      "default": "background-2"
    },
    {
      "type": "header",
      "content": "Video player"
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Video looping",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "muted_autoplay",
      "label": "Muted autoplay",
      "default": false,
      "info": "Use this instead of GIFs & animated WEBPs."
    },
    {
      "type": "checkbox",
      "id": "display_play_btn",
      "label": "Enable play & pause on click",
      "info": "Automatically enabled if autoplay is disabled.",
      "default": true
    },
    {
      "type": "select",
      "id": "play_btn_position",
      "options": [
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "top-left",
          "label": "Top left"
        },
        {
          "value": "top-right",
          "label": "Top right"
        },
        {
          "value": "bottom-right",
          "label": "Bottom right"
        },
        {
          "value": "bottom-left",
          "label": "Bottom left"
        }
      ],
      "default": "center",
      "label": "Play button position"
    },
    {
      "type": "select",
      "id": "btn_color_scheme",
      "label": "Play button color scheme",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Inverse" }
      ],
      "default": "accent-1"
    },
    {
      "type": "select",
      "id": "play_btn_style",
      "options": [
        {
          "value": "solid",
          "label": "Filled"
        },
        {
          "value": "outline",
          "label": "Outlined"
        }
      ],
      "default": "solid",
      "label": "Play button style"
    },
    {
      "type": "range",
      "id": "play_btn_size_desktop",
      "min": 30,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Play button desktop size",
      "default": 50
    },
    {
      "type": "range",
      "id": "play_btn_size_mobile",
      "min": 25,
      "max": 75,
      "step": 5,
      "unit": "px",
      "label": "Play button mobile size",
      "default": 50
    },
    {
      "type": "checkbox",
      "id": "btn_animation",
      "label": "Enable button ripple animation",
      "default": false
    },
    {
      "type": "range",
      "id": "play_btn_corner_radius",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Play button corner radius",
      "default": 100
    },
    {
      "type": "checkbox",
      "id": "display_sound_btn",
      "label": "Display mute/unmute button",
      "default": false
    },
    {
      "type": "select",
      "id": "sound_btn_color_scheme",
      "label": "Sound button color scheme",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Inverse" }
      ],
      "default": "inverse"
    },
    {
      "type": "checkbox",
      "id": "display_timeline",
      "label": "Display timeline",
      "default": false
    },
    {
      "type": "select",
      "id": "timeline_color",
      "label": "Timeline color",
      "options": [
        { "value": "accent-1", "label": "Accent 1" },
        { "value": "accent-2", "label": "Accent 2" },
        { "value": "background-1", "label": "Background 1" },
        { "value": "background-2", "label": "Background 2" },
        { "value": "inverse", "label": "Text" }
      ],
      "default": "accent-1"
    },
    {
      "type": "header",
      "content": "Images"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image #1"
    },
    {
      "type": "richtext",
      "id": "image_desc_1",
      "label": "Image #1 Description"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image #2"
    },
    {
      "type": "richtext",
      "id": "image_desc_2",
      "label": "Image #2 Description"
    },
    {
      "type": "image_picker",
      "id": "image_3",
      "label": "Image #3"
    },
    {
      "type": "richtext",
      "id": "image_desc_3",
      "label": "Image #3 Description"
    },
    {
      "type": "image_picker",
      "id": "image_4",
      "label": "Image #4"
    },
    {
      "type": "richtext",
      "id": "image_desc_4",
      "label": "Image #4 Description"
    },
    {
      "type": "image_picker",
      "id": "image_5",
      "label": "Image #5"
    },
    {
      "type": "richtext",
      "id": "image_desc_5",
      "label": "Image #5 Description"
    },
    {
      "type": "image_picker",
      "id": "image_6",
      "label": "Image #6"
    },
    {
      "type": "richtext",
      "id": "image_desc_6",
      "label": "Image #6 Description"
    },
    {
      "type": "image_picker",
      "id": "image_7",
      "label": "Image #7"
    },
    {
      "type": "richtext",
      "id": "image_desc_7",
      "label": "Image #7 Description"
    },
    {
      "type": "image_picker",
      "id": "image_8",
      "label": "Image #8"
    },
    {
      "type": "richtext",
      "id": "image_desc_8",
      "label": "Image #8 Description"
    },
    {
      "type": "image_picker",
      "id": "image_9",
      "label": "Image #9"
    },
    {
      "type": "richtext",
      "id": "image_desc_9",
      "label": "Image #9 Description"
    },
    {
      "type": "image_picker",
      "id": "image_10",
      "label": "Image #10"
    },
    {
      "type": "richtext",
      "id": "image_desc_10",
      "label": "Image #10 Description"
    },

    {
      "type": "header",
      "content": "Videos"
    },
    {
      "type": "video",
      "id": "video_1",
      "label": "Video #1"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_1",
      "label": "Video #1 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_1",
      "label": "Video #1 Description"
    },
    {
      "type": "video",
      "id": "video_2",
      "label": "Video #2"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_2",
      "label": "Video #2 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_2",
      "label": "Video #2 Description"
    },
    {
      "type": "video",
      "id": "video_3",
      "label": "Video #3"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_3",
      "label": "Video #3 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_3",
      "label": "Video #3 Description"
    },
    {
      "type": "video",
      "id": "video_4",
      "label": "Video #4"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_4",
      "label": "Video #4 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_4",
      "label": "Video #4 Description"
    },
    {
      "type": "video",
      "id": "video_5",
      "label": "Video #5"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_5",
      "label": "Video #5 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_5",
      "label": "Video #5 Description"
    },
    {
      "type": "video",
      "id": "video_6",
      "label": "Video #6"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_6",
      "label": "Video #6 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_6",
      "label": "Video #6 Description"
    },
    {
      "type": "video",
      "id": "video_7",
      "label": "Video #7"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_7",
      "label": "Video #7 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_7",
      "label": "Video #7 Description"
    },
    {
      "type": "video",
      "id": "video_8",
      "label": "Video #8"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_8",
      "label": "Video #8 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_8",
      "label": "Video #8 Description"
    },
    {
      "type": "video",
      "id": "video_9",
      "label": "Video #9"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_9",
      "label": "Video #9 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_9",
      "label": "Video #9 Description"
    },
    {
      "type": "video",
      "id": "video_10",
      "label": "Video #10"
    },
    {
      "type": "image_picker",
      "id": "video_thumb_10",
      "label": "Video #10 Thumbnail"
    },
    {
      "type": "richtext",
      "id": "video_desc_10",
      "label": "Video #10 Description"
    },
    {
      "type": "header",
      "content": "Margins"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Top",
      "min": 0,
      "max": 45,
      "step": 3,
      "unit": "px",
      "default": 15
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Bottom",
      "min": 0,
      "max": 45,
      "step": 3,
      "unit": "px",
      "default": 15
    }
  ],
  "presets": [
    {
      "name": "Image/Video slider",
      "category": "Media"
    }
  ]
}
{% endschema %}
